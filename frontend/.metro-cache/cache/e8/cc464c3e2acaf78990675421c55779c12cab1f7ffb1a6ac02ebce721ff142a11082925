{"dependencies":[{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":27},"end":{"line":2,"column":49,"index":76}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"../config/constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":77},"end":{"line":3,"column":117,"index":194}}],"key":"vHe1Cq1mMSFYXQmjuu1Q6MMzu4c=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"traktService\", {\n    enumerable: true,\n    get: function () {\n      return traktService;\n    }\n  });\n  var _axios = require(_dependencyMap[0], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoSecureStore = require(_dependencyMap[1], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _configConstants = require(_dependencyMap[2], \"../config/constants\");\n  const traktApi = axios.default.create({\n    baseURL: _configConstants.TRAKT_BASE_URL,\n    headers: {\n      'Content-Type': 'application/json',\n      'trakt-api-version': '2',\n      'trakt-api-key': _configConstants.TRAKT_CLIENT_ID\n    }\n  });\n\n  // Add auth token to requests\n  traktApi.interceptors.request.use(async config => {\n    const token = await SecureStore.getItemAsync(_configConstants.STORAGE_KEYS.TRAKT_TOKEN);\n    if (token) {\n      const tokenData = JSON.parse(token);\n      config.headers.Authorization = `Bearer ${tokenData.access_token}`;\n    }\n    return config;\n  });\n  const traktService = {\n    // Device Code Flow\n    getDeviceCode: async () => {\n      const response = await traktApi.post('/oauth/device/code', {\n        client_id: _configConstants.TRAKT_CLIENT_ID\n      });\n      return response.data;\n    },\n    pollForToken: async deviceCode => {\n      try {\n        const response = await traktApi.post('/oauth/device/token', {\n          code: deviceCode,\n          client_id: _configConstants.TRAKT_CLIENT_ID,\n          client_secret: _configConstants.TRAKT_CLIENT_SECRET\n        });\n        return response.data;\n      } catch (error) {\n        if (error.response?.status === 400) {\n          return null; // Still pending\n        }\n        throw error;\n      }\n    },\n    saveToken: async token => {\n      await SecureStore.setItemAsync(_configConstants.STORAGE_KEYS.TRAKT_TOKEN, JSON.stringify(token));\n    },\n    getToken: async () => {\n      const token = await SecureStore.getItemAsync(_configConstants.STORAGE_KEYS.TRAKT_TOKEN);\n      return token ? JSON.parse(token) : null;\n    },\n    logout: async () => {\n      await SecureStore.deleteItemAsync(_configConstants.STORAGE_KEYS.TRAKT_TOKEN);\n    },\n    // User\n    getCurrentUser: async () => {\n      const response = await traktApi.get('/users/me');\n      return response.data;\n    },\n    // Continue Watching\n    getWatchedProgress: async () => {\n      try {\n        const response = await traktApi.get('/sync/playback');\n        return response.data.map(item => ({\n          media: item.movie || item.show,\n          progress: item.progress,\n          lastWatched: item.paused_at,\n          type: item.type\n        }));\n      } catch (error) {\n        console.error('Error fetching continue watching:', error);\n        return [];\n      }\n    },\n    // Scrobble\n    startWatching: async (type, id, progress) => {\n      await traktApi.post('/scrobble/start', {\n        [type]: {\n          ids: {\n            tmdb: id\n          }\n        },\n        progress\n      });\n    },\n    pauseWatching: async (type, id, progress) => {\n      await traktApi.post('/scrobble/pause', {\n        [type]: {\n          ids: {\n            tmdb: id\n          }\n        },\n        progress\n      });\n    },\n    stopWatching: async (type, id, progress) => {\n      await traktApi.post('/scrobble/stop', {\n        [type]: {\n          ids: {\n            tmdb: id\n          }\n        },\n        progress\n      });\n    }\n  };\n});","lineCount":141,"map":[[27,2,25,0,"Object"],[27,8,25,0],[27,9,25,0,"defineProperty"],[27,23,25,0],[27,24,25,0,"exports"],[27,31,25,0],[28,4,25,0,"enumerable"],[28,14,25,0],[29,4,25,0,"get"],[29,7,25,0],[29,18,25,0,"get"],[29,19,25,0],[30,6,25,0],[30,13,25,0,"traktService"],[30,25,25,0],[31,4,25,0],[32,2,25,0],[33,2,1,0],[33,6,1,0,"_axios"],[33,12,1,0],[33,15,1,0,"require"],[33,22,1,0],[33,23,1,0,"_dependencyMap"],[33,37,1,0],[34,2,1,0],[34,6,1,0,"axios"],[34,11,1,0],[34,14,1,0,"_interopDefault"],[34,29,1,0],[34,30,1,0,"_axios"],[34,36,1,0],[35,2,2,0],[35,6,2,0,"_expoSecureStore"],[35,22,2,0],[35,25,2,0,"require"],[35,32,2,0],[35,33,2,0,"_dependencyMap"],[35,47,2,0],[36,2,2,0],[36,6,2,0,"SecureStore"],[36,17,2,0],[36,20,2,0,"_interopNamespace"],[36,37,2,0],[36,38,2,0,"_expoSecureStore"],[36,54,2,0],[37,2,3,0],[37,6,3,0,"_configConstants"],[37,22,3,0],[37,25,3,0,"require"],[37,32,3,0],[37,33,3,0,"_dependencyMap"],[37,47,3,0],[38,2,6,0],[38,8,6,6,"traktApi"],[38,16,6,14],[38,19,6,17,"axios"],[38,24,6,22],[38,25,6,22,"default"],[38,32,6,22],[38,33,6,23,"create"],[38,39,6,29],[38,40,6,30],[39,4,7,2,"baseURL"],[39,11,7,9],[39,13,7,11,"TRAKT_BASE_URL"],[39,29,7,25],[39,30,7,25,"TRAKT_BASE_URL"],[39,44,7,25],[40,4,8,2,"headers"],[40,11,8,9],[40,13,8,11],[41,6,9,4],[41,20,9,18],[41,22,9,20],[41,40,9,38],[42,6,10,4],[42,25,10,23],[42,27,10,25],[42,30,10,28],[43,6,11,4],[43,21,11,19],[43,23,11,21,"TRAKT_CLIENT_ID"],[43,39,11,36],[43,40,11,36,"TRAKT_CLIENT_ID"],[44,4,12,2],[45,2,13,0],[45,3,13,1],[45,4,13,2],[47,2,15,0],[48,2,16,0,"traktApi"],[48,10,16,8],[48,11,16,9,"interceptors"],[48,23,16,21],[48,24,16,22,"request"],[48,31,16,29],[48,32,16,30,"use"],[48,35,16,33],[48,36,16,34],[48,42,16,41,"config"],[48,48,16,47],[48,52,16,52],[49,4,17,2],[49,10,17,8,"token"],[49,15,17,13],[49,18,17,16],[49,24,17,22,"SecureStore"],[49,35,17,33],[49,36,17,34,"getItemAsync"],[49,48,17,46],[49,49,17,47,"STORAGE_KEYS"],[49,65,17,59],[49,66,17,59,"STORAGE_KEYS"],[49,78,17,59],[49,79,17,60,"TRAKT_TOKEN"],[49,90,17,71],[49,91,17,72],[50,4,18,2],[50,8,18,6,"token"],[50,13,18,11],[50,15,18,13],[51,6,19,4],[51,12,19,10,"tokenData"],[51,21,19,31],[51,24,19,34,"JSON"],[51,28,19,38],[51,29,19,39,"parse"],[51,34,19,44],[51,35,19,45,"token"],[51,40,19,50],[51,41,19,51],[52,6,20,4,"config"],[52,12,20,10],[52,13,20,11,"headers"],[52,20,20,18],[52,21,20,19,"Authorization"],[52,34,20,32],[52,37,20,35],[52,47,20,45,"tokenData"],[52,56,20,54],[52,57,20,55,"access_token"],[52,69,20,67],[52,71,20,69],[53,4,21,2],[54,4,22,2],[54,11,22,9,"config"],[54,17,22,15],[55,2,23,0],[55,3,23,1],[55,4,23,2],[56,2,25,7],[56,8,25,13,"traktService"],[56,20,25,25],[56,23,25,28],[57,4,26,2],[58,4,27,2,"getDeviceCode"],[58,17,27,15],[58,19,27,17],[58,25,27,17,"getDeviceCode"],[58,26,27,17],[58,31,27,146],[59,6,28,4],[59,12,28,10,"response"],[59,20,28,18],[59,23,28,21],[59,29,28,27,"traktApi"],[59,37,28,35],[59,38,28,36,"post"],[59,42,28,40],[59,43,28,41],[59,63,28,61],[59,65,28,63],[60,8,29,6,"client_id"],[60,17,29,15],[60,19,29,17,"TRAKT_CLIENT_ID"],[60,35,29,32],[60,36,29,32,"TRAKT_CLIENT_ID"],[61,6,30,4],[61,7,30,5],[61,8,30,6],[62,6,31,4],[62,13,31,11,"response"],[62,21,31,19],[62,22,31,20,"data"],[62,26,31,24],[63,4,32,2],[63,5,32,3],[64,4,34,2,"pollForToken"],[64,16,34,14],[64,18,34,16],[64,24,34,23,"deviceCode"],[64,34,34,41],[64,38,34,74],[65,6,35,4],[65,10,35,8],[66,8,36,6],[66,14,36,12,"response"],[66,22,36,20],[66,25,36,23],[66,31,36,29,"traktApi"],[66,39,36,37],[66,40,36,38,"post"],[66,44,36,42],[66,45,36,43],[66,66,36,64],[66,68,36,66],[67,10,37,8,"code"],[67,14,37,12],[67,16,37,14,"deviceCode"],[67,26,37,24],[68,10,38,8,"client_id"],[68,19,38,17],[68,21,38,19,"TRAKT_CLIENT_ID"],[68,37,38,34],[68,38,38,34,"TRAKT_CLIENT_ID"],[68,53,38,34],[69,10,39,8,"client_secret"],[69,23,39,21],[69,25,39,23,"TRAKT_CLIENT_SECRET"],[69,41,39,42],[69,42,39,42,"TRAKT_CLIENT_SECRET"],[70,8,40,6],[70,9,40,7],[70,10,40,8],[71,8,41,6],[71,15,41,13,"response"],[71,23,41,21],[71,24,41,22,"data"],[71,28,41,26],[72,6,42,4],[72,7,42,5],[72,8,42,6],[72,15,42,13,"error"],[72,20,42,23],[72,22,42,25],[73,8,43,6],[73,12,43,10,"error"],[73,17,43,15],[73,18,43,16,"response"],[73,26,43,24],[73,28,43,26,"status"],[73,34,43,32],[73,39,43,37],[73,42,43,40],[73,44,43,42],[74,10,44,8],[74,17,44,15],[74,21,44,19],[74,22,44,20],[74,23,44,21],[75,8,45,6],[76,8,46,6],[76,14,46,12,"error"],[76,19,46,17],[77,6,47,4],[78,4,48,2],[78,5,48,3],[79,4,50,2,"saveToken"],[79,13,50,11],[79,15,50,13],[79,21,50,20,"token"],[79,26,50,37],[79,30,50,57],[80,6,51,4],[80,12,51,10,"SecureStore"],[80,23,51,21],[80,24,51,22,"setItemAsync"],[80,36,51,34],[80,37,51,35,"STORAGE_KEYS"],[80,53,51,47],[80,54,51,47,"STORAGE_KEYS"],[80,66,51,47],[80,67,51,48,"TRAKT_TOKEN"],[80,78,51,59],[80,80,51,61,"JSON"],[80,84,51,65],[80,85,51,66,"stringify"],[80,94,51,75],[80,95,51,76,"token"],[80,100,51,81],[80,101,51,82],[80,102,51,83],[81,4,52,2],[81,5,52,3],[82,4,54,2,"getToken"],[82,12,54,10],[82,14,54,12],[82,20,54,12,"getToken"],[82,21,54,12],[82,26,54,52],[83,6,55,4],[83,12,55,10,"token"],[83,17,55,15],[83,20,55,18],[83,26,55,24,"SecureStore"],[83,37,55,35],[83,38,55,36,"getItemAsync"],[83,50,55,48],[83,51,55,49,"STORAGE_KEYS"],[83,67,55,61],[83,68,55,61,"STORAGE_KEYS"],[83,80,55,61],[83,81,55,62,"TRAKT_TOKEN"],[83,92,55,73],[83,93,55,74],[84,6,56,4],[84,13,56,11,"token"],[84,18,56,16],[84,21,56,19,"JSON"],[84,25,56,23],[84,26,56,24,"parse"],[84,31,56,29],[84,32,56,30,"token"],[84,37,56,35],[84,38,56,36],[84,41,56,39],[84,45,56,43],[85,4,57,2],[85,5,57,3],[86,4,59,2,"logout"],[86,10,59,8],[86,12,59,10],[86,18,59,10,"logout"],[86,19,59,10],[86,24,59,37],[87,6,60,4],[87,12,60,10,"SecureStore"],[87,23,60,21],[87,24,60,22,"deleteItemAsync"],[87,39,60,37],[87,40,60,38,"STORAGE_KEYS"],[87,56,60,50],[87,57,60,50,"STORAGE_KEYS"],[87,69,60,50],[87,70,60,51,"TRAKT_TOKEN"],[87,81,60,62],[87,82,60,63],[88,4,61,2],[88,5,61,3],[89,4,63,2],[90,4,64,2,"getCurrentUser"],[90,18,64,16],[90,20,64,18],[90,26,64,18,"getCurrentUser"],[90,27,64,18],[90,32,64,50],[91,6,65,4],[91,12,65,10,"response"],[91,20,65,18],[91,23,65,21],[91,29,65,27,"traktApi"],[91,37,65,35],[91,38,65,36,"get"],[91,41,65,39],[91,42,65,40],[91,53,65,51],[91,54,65,52],[92,6,66,4],[92,13,66,11,"response"],[92,21,66,19],[92,22,66,20,"data"],[92,26,66,24],[93,4,67,2],[93,5,67,3],[94,4,69,2],[95,4,70,2,"getWatchedProgress"],[95,22,70,20],[95,24,70,22],[95,30,70,22,"getWatchedProgress"],[95,31,70,22],[95,36,70,63],[96,6,71,4],[96,10,71,8],[97,8,72,6],[97,14,72,12,"response"],[97,22,72,20],[97,25,72,23],[97,31,72,29,"traktApi"],[97,39,72,37],[97,40,72,38,"get"],[97,43,72,41],[97,44,72,42],[97,60,72,58],[97,61,72,59],[98,8,73,6],[98,15,73,13,"response"],[98,23,73,21],[98,24,73,22,"data"],[98,28,73,26],[98,29,73,27,"map"],[98,32,73,30],[98,33,73,32,"item"],[98,37,73,41],[98,42,73,47],[99,10,74,8,"media"],[99,15,74,13],[99,17,74,15,"item"],[99,21,74,19],[99,22,74,20,"movie"],[99,27,74,25],[99,31,74,29,"item"],[99,35,74,33],[99,36,74,34,"show"],[99,40,74,38],[100,10,75,8,"progress"],[100,18,75,16],[100,20,75,18,"item"],[100,24,75,22],[100,25,75,23,"progress"],[100,33,75,31],[101,10,76,8,"lastWatched"],[101,21,76,19],[101,23,76,21,"item"],[101,27,76,25],[101,28,76,26,"paused_at"],[101,37,76,35],[102,10,77,8,"type"],[102,14,77,12],[102,16,77,14,"item"],[102,20,77,18],[102,21,77,19,"type"],[103,8,78,6],[103,9,78,7],[103,10,78,8],[103,11,78,9],[104,6,79,4],[104,7,79,5],[104,8,79,6],[104,15,79,13,"error"],[104,20,79,18],[104,22,79,20],[105,8,80,6,"console"],[105,15,80,13],[105,16,80,14,"error"],[105,21,80,19],[105,22,80,20],[105,57,80,55],[105,59,80,57,"error"],[105,64,80,62],[105,65,80,63],[106,8,81,6],[106,15,81,13],[106,17,81,15],[107,6,82,4],[108,4,83,2],[108,5,83,3],[109,4,85,2],[110,4,86,2,"startWatching"],[110,17,86,15],[110,19,86,17],[110,25,86,17,"startWatching"],[110,26,86,24,"type"],[110,30,86,44],[110,32,86,46,"id"],[110,34,86,56],[110,36,86,58,"progress"],[110,44,86,74],[110,49,86,94],[111,6,87,4],[111,12,87,10,"traktApi"],[111,20,87,18],[111,21,87,19,"post"],[111,25,87,23],[111,26,87,24],[111,43,87,41],[111,45,87,43],[112,8,88,6],[112,9,88,7,"type"],[112,13,88,11],[112,16,88,14],[113,10,88,16,"ids"],[113,13,88,19],[113,15,88,21],[114,12,88,23,"tmdb"],[114,16,88,27],[114,18,88,29,"id"],[115,10,88,32],[116,8,88,34],[116,9,88,35],[117,8,89,6,"progress"],[118,6,90,4],[118,7,90,5],[118,8,90,6],[119,4,91,2],[119,5,91,3],[120,4,93,2,"pauseWatching"],[120,17,93,15],[120,19,93,17],[120,25,93,17,"pauseWatching"],[120,26,93,24,"type"],[120,30,93,44],[120,32,93,46,"id"],[120,34,93,56],[120,36,93,58,"progress"],[120,44,93,74],[120,49,93,94],[121,6,94,4],[121,12,94,10,"traktApi"],[121,20,94,18],[121,21,94,19,"post"],[121,25,94,23],[121,26,94,24],[121,43,94,41],[121,45,94,43],[122,8,95,6],[122,9,95,7,"type"],[122,13,95,11],[122,16,95,14],[123,10,95,16,"ids"],[123,13,95,19],[123,15,95,21],[124,12,95,23,"tmdb"],[124,16,95,27],[124,18,95,29,"id"],[125,10,95,32],[126,8,95,34],[126,9,95,35],[127,8,96,6,"progress"],[128,6,97,4],[128,7,97,5],[128,8,97,6],[129,4,98,2],[129,5,98,3],[130,4,100,2,"stopWatching"],[130,16,100,14],[130,18,100,16],[130,24,100,16,"stopWatching"],[130,25,100,23,"type"],[130,29,100,43],[130,31,100,45,"id"],[130,33,100,55],[130,35,100,57,"progress"],[130,43,100,73],[130,48,100,93],[131,6,101,4],[131,12,101,10,"traktApi"],[131,20,101,18],[131,21,101,19,"post"],[131,25,101,23],[131,26,101,24],[131,42,101,40],[131,44,101,42],[132,8,102,6],[132,9,102,7,"type"],[132,13,102,11],[132,16,102,14],[133,10,102,16,"ids"],[133,13,102,19],[133,15,102,21],[134,12,102,23,"tmdb"],[134,16,102,27],[134,18,102,29,"id"],[135,10,102,32],[136,8,102,34],[136,9,102,35],[137,8,103,6,"progress"],[138,6,104,4],[138,7,104,5],[138,8,104,6],[139,4,105,2],[140,2,106,0],[140,3,106,1],[141,0,106,2],[141,3]],"functionMap":{"names":["<global>","traktApi.interceptors.request.use$argument_0","traktService.getDeviceCode","traktService.pollForToken","traktService.saveToken","traktService.getToken","traktService.logout","traktService.getCurrentUser","traktService.getWatchedProgress","response.data.map$argument_0","traktService.startWatching","traktService.pauseWatching","traktService.stopWatching"],"mappings":"AAA;kCCe;CDO;iBEI;GFK;gBGE;GHc;aIE;GJE;YKE;GLG;UME;GNE;kBOG;GPG;sBQG;+BCG;QDK;GRK;iBUG;GVK;iBWE;GXK;gBYE;GZK"},"hasCjsExports":false},"type":"js/module"}]}