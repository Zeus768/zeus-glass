{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"streamChunk\", {\n    enumerable: true,\n    get: function () {\n      return streamChunk;\n    }\n  });\n  Object.defineProperty(exports, \"readBytes\", {\n    enumerable: true,\n    get: function () {\n      return readBytes;\n    }\n  });\n  Object.defineProperty(exports, \"trackStream\", {\n    enumerable: true,\n    get: function () {\n      return trackStream;\n    }\n  });\n  const streamChunk = function* (chunk, chunkSize) {\n    let len = chunk.byteLength;\n    if (!chunkSize || len < chunkSize) {\n      yield chunk;\n      return;\n    }\n    let pos = 0;\n    let end;\n    while (pos < len) {\n      end = pos + chunkSize;\n      yield chunk.slice(pos, end);\n      pos = end;\n    }\n  };\n  const readBytes = async function* (iterable, chunkSize) {\n    for await (const chunk of readStream(iterable)) {\n      yield* streamChunk(chunk, chunkSize);\n    }\n  };\n  const readStream = async function* (stream) {\n    if (stream[Symbol.asyncIterator]) {\n      yield* stream;\n      return;\n    }\n    const reader = stream.getReader();\n    try {\n      for (;;) {\n        const {\n          done,\n          value\n        } = await reader.read();\n        if (done) {\n          break;\n        }\n        yield value;\n      }\n    } finally {\n      await reader.cancel();\n    }\n  };\n  const trackStream = (stream, chunkSize, onProgress, onFinish) => {\n    const iterator = readBytes(stream, chunkSize);\n    let bytes = 0;\n    let done;\n    let _onFinish = e => {\n      if (!done) {\n        done = true;\n        onFinish && onFinish(e);\n      }\n    };\n    return new ReadableStream({\n      async pull(controller) {\n        try {\n          const {\n            done,\n            value\n          } = await iterator.next();\n          if (done) {\n            _onFinish();\n            controller.close();\n            return;\n          }\n          let len = value.byteLength;\n          if (onProgress) {\n            let loadedBytes = bytes += len;\n            onProgress(loadedBytes);\n          }\n          controller.enqueue(new Uint8Array(value));\n        } catch (err) {\n          _onFinish(err);\n          throw err;\n        }\n      },\n      cancel(reason) {\n        _onFinish(reason);\n        return iterator.return();\n      }\n    }, {\n      highWaterMark: 2\n    });\n  };\n});","lineCount":106,"map":[[7,2,1,0,"Object"],[7,8,1,0],[7,9,1,0,"defineProperty"],[7,23,1,0],[7,24,1,0,"exports"],[7,31,1,0],[8,4,1,0,"enumerable"],[8,14,1,0],[9,4,1,0,"get"],[9,7,1,0],[9,18,1,0,"get"],[9,19,1,0],[10,6,1,0],[10,13,1,0,"streamChunk"],[10,24,1,0],[11,4,1,0],[12,2,1,0],[13,2,19,0,"Object"],[13,8,19,0],[13,9,19,0,"defineProperty"],[13,23,19,0],[13,24,19,0,"exports"],[13,31,19,0],[14,4,19,0,"enumerable"],[14,14,19,0],[15,4,19,0,"get"],[15,7,19,0],[15,18,19,0,"get"],[15,19,19,0],[16,6,19,0],[16,13,19,0,"readBytes"],[16,22,19,0],[17,4,19,0],[18,2,19,0],[19,2,45,0,"Object"],[19,8,45,0],[19,9,45,0,"defineProperty"],[19,23,45,0],[19,24,45,0,"exports"],[19,31,45,0],[20,4,45,0,"enumerable"],[20,14,45,0],[21,4,45,0,"get"],[21,7,45,0],[21,18,45,0,"get"],[21,19,45,0],[22,6,45,0],[22,13,45,0,"trackStream"],[22,24,45,0],[23,4,45,0],[24,2,45,0],[25,2,1,7],[25,8,1,13,"streamChunk"],[25,19,1,24],[25,22,1,27],[25,32,1,27,"streamChunk"],[25,33,1,38,"chunk"],[25,38,1,43],[25,40,1,45,"chunkSize"],[25,49,1,54],[25,51,1,56],[26,4,2,2],[26,8,2,6,"len"],[26,11,2,9],[26,14,2,12,"chunk"],[26,19,2,17],[26,20,2,18,"byteLength"],[26,30,2,28],[27,4,4,2],[27,8,4,6],[27,9,4,7,"chunkSize"],[27,18,4,16],[27,22,4,20,"len"],[27,25,4,23],[27,28,4,26,"chunkSize"],[27,37,4,35],[27,39,4,37],[28,6,5,4],[28,12,5,10,"chunk"],[28,17,5,15],[29,6,6,4],[30,4,7,2],[31,4,9,2],[31,8,9,6,"pos"],[31,11,9,9],[31,14,9,12],[31,15,9,13],[32,4,10,2],[32,8,10,6,"end"],[32,11,10,9],[33,4,12,2],[33,11,12,9,"pos"],[33,14,12,12],[33,17,12,15,"len"],[33,20,12,18],[33,22,12,20],[34,6,13,4,"end"],[34,9,13,7],[34,12,13,10,"pos"],[34,15,13,13],[34,18,13,16,"chunkSize"],[34,27,13,25],[35,6,14,4],[35,12,14,10,"chunk"],[35,17,14,15],[35,18,14,16,"slice"],[35,23,14,21],[35,24,14,22,"pos"],[35,27,14,25],[35,29,14,27,"end"],[35,32,14,30],[35,33,14,31],[36,6,15,4,"pos"],[36,9,15,7],[36,12,15,10,"end"],[36,15,15,13],[37,4,16,2],[38,2,17,0],[38,3,17,1],[39,2,19,7],[39,8,19,13,"readBytes"],[39,17,19,22],[39,20,19,25],[39,36,19,25,"readBytes"],[39,37,19,42,"iterable"],[39,45,19,50],[39,47,19,52,"chunkSize"],[39,56,19,61],[39,58,19,63],[40,4,20,2],[40,15,20,13],[40,21,20,19,"chunk"],[40,26,20,24],[40,30,20,28,"readStream"],[40,40,20,38],[40,41,20,39,"iterable"],[40,49,20,47],[40,50,20,48],[40,52,20,50],[41,6,21,4],[41,13,21,11,"streamChunk"],[41,24,21,22],[41,25,21,23,"chunk"],[41,30,21,28],[41,32,21,30,"chunkSize"],[41,41,21,39],[41,42,21,40],[42,4,22,2],[43,2,23,0],[43,3,23,1],[44,2,25,0],[44,8,25,6,"readStream"],[44,18,25,16],[44,21,25,19],[44,37,25,19,"readStream"],[44,38,25,36,"stream"],[44,44,25,42],[44,46,25,44],[45,4,26,2],[45,8,26,6,"stream"],[45,14,26,12],[45,15,26,13,"Symbol"],[45,21,26,19],[45,22,26,20,"asyncIterator"],[45,35,26,33],[45,36,26,34],[45,38,26,36],[46,6,27,4],[46,13,27,11,"stream"],[46,19,27,17],[47,6,28,4],[48,4,29,2],[49,4,31,2],[49,10,31,8,"reader"],[49,16,31,14],[49,19,31,17,"stream"],[49,25,31,23],[49,26,31,24,"getReader"],[49,35,31,33],[49,36,31,34],[49,37,31,35],[50,4,32,2],[50,8,32,6],[51,6,33,4],[51,15,33,13],[52,8,34,6],[52,14,34,12],[53,10,34,14,"done"],[53,14,34,18],[54,10,34,20,"value"],[55,8,34,26],[55,9,34,27],[55,12,34,30],[55,18,34,36,"reader"],[55,24,34,42],[55,25,34,43,"read"],[55,29,34,47],[55,30,34,48],[55,31,34,49],[56,8,35,6],[56,12,35,10,"done"],[56,16,35,14],[56,18,35,16],[57,10,36,8],[58,8,37,6],[59,8,38,6],[59,14,38,12,"value"],[59,19,38,17],[60,6,39,4],[61,4,40,2],[61,5,40,3],[61,14,40,12],[62,6,41,4],[62,12,41,10,"reader"],[62,18,41,16],[62,19,41,17,"cancel"],[62,25,41,23],[62,26,41,24],[62,27,41,25],[63,4,42,2],[64,2,43,0],[64,3,43,1],[65,2,45,7],[65,8,45,13,"trackStream"],[65,19,45,24],[65,22,45,27,"trackStream"],[65,23,45,28,"stream"],[65,29,45,34],[65,31,45,36,"chunkSize"],[65,40,45,45],[65,42,45,47,"onProgress"],[65,52,45,57],[65,54,45,59,"onFinish"],[65,62,45,67],[65,67,45,72],[66,4,46,2],[66,10,46,8,"iterator"],[66,18,46,16],[66,21,46,19,"readBytes"],[66,30,46,28],[66,31,46,29,"stream"],[66,37,46,35],[66,39,46,37,"chunkSize"],[66,48,46,46],[66,49,46,47],[67,4,48,2],[67,8,48,6,"bytes"],[67,13,48,11],[67,16,48,14],[67,17,48,15],[68,4,49,2],[68,8,49,6,"done"],[68,12,49,10],[69,4,50,2],[69,8,50,6,"_onFinish"],[69,17,50,15],[69,20,50,19,"e"],[69,21,50,20],[69,25,50,25],[70,6,51,4],[70,10,51,8],[70,11,51,9,"done"],[70,15,51,13],[70,17,51,15],[71,8,52,6,"done"],[71,12,52,10],[71,15,52,13],[71,19,52,17],[72,8,53,6,"onFinish"],[72,16,53,14],[72,20,53,18,"onFinish"],[72,28,53,26],[72,29,53,27,"e"],[72,30,53,28],[72,31,53,29],[73,6,54,4],[74,4,55,2],[74,5,55,3],[75,4,57,2],[75,11,57,9],[75,15,57,13,"ReadableStream"],[75,29,57,27],[75,30,58,4],[76,6,59,6],[76,12,59,12,"pull"],[76,16,59,16,"pull"],[76,17,59,17,"controller"],[76,27,59,27],[76,29,59,29],[77,8,60,8],[77,12,60,12],[78,10,61,10],[78,16,61,16],[79,12,61,18,"done"],[79,16,61,22],[80,12,61,24,"value"],[81,10,61,30],[81,11,61,31],[81,14,61,34],[81,20,61,40,"iterator"],[81,28,61,48],[81,29,61,49,"next"],[81,33,61,53],[81,34,61,54],[81,35,61,55],[82,10,63,10],[82,14,63,14,"done"],[82,18,63,18],[82,20,63,20],[83,12,64,12,"_onFinish"],[83,21,64,21],[83,22,64,22],[83,23,64,23],[84,12,65,12,"controller"],[84,22,65,22],[84,23,65,23,"close"],[84,28,65,28],[84,29,65,29],[84,30,65,30],[85,12,66,12],[86,10,67,10],[87,10,69,10],[87,14,69,14,"len"],[87,17,69,17],[87,20,69,20,"value"],[87,25,69,25],[87,26,69,26,"byteLength"],[87,36,69,36],[88,10,70,10],[88,14,70,14,"onProgress"],[88,24,70,24],[88,26,70,26],[89,12,71,12],[89,16,71,16,"loadedBytes"],[89,27,71,27],[89,30,71,31,"bytes"],[89,35,71,36],[89,39,71,40,"len"],[89,42,71,44],[90,12,72,12,"onProgress"],[90,22,72,22],[90,23,72,23,"loadedBytes"],[90,34,72,34],[90,35,72,35],[91,10,73,10],[92,10,74,10,"controller"],[92,20,74,20],[92,21,74,21,"enqueue"],[92,28,74,28],[92,29,74,29],[92,33,74,33,"Uint8Array"],[92,43,74,43],[92,44,74,44,"value"],[92,49,74,49],[92,50,74,50],[92,51,74,51],[93,8,75,8],[93,9,75,9],[93,10,75,10],[93,17,75,17,"err"],[93,20,75,20],[93,22,75,22],[94,10,76,10,"_onFinish"],[94,19,76,19],[94,20,76,20,"err"],[94,23,76,23],[94,24,76,24],[95,10,77,10],[95,16,77,16,"err"],[95,19,77,19],[96,8,78,8],[97,6,79,6],[97,7,79,7],[98,6,80,6,"cancel"],[98,12,80,12,"cancel"],[98,13,80,13,"reason"],[98,19,80,19],[98,21,80,21],[99,8,81,8,"_onFinish"],[99,17,81,17],[99,18,81,18,"reason"],[99,24,81,24],[99,25,81,25],[100,8,82,8],[100,15,82,15,"iterator"],[100,23,82,23],[100,24,82,24,"return"],[100,30,82,30],[100,31,82,31],[100,32,82,32],[101,6,83,6],[102,4,84,4],[102,5,84,5],[102,7,85,4],[103,6,86,6,"highWaterMark"],[103,19,86,19],[103,21,86,21],[104,4,87,4],[104,5,88,2],[104,6,88,3],[105,2,89,0],[105,3,89,1],[106,0,89,2],[106,3]],"functionMap":{"names":["<global>","streamChunk","readBytes","readStream","trackStream","_onFinish","ReadableStream$argument_0.pull","ReadableStream$argument_0.cancel"],"mappings":"AAA,2BC;CDgB;yBEE;CFI;mBGE;CHkB;2BIE;kBCK;GDK;MEI;OFoB;MGC;OHG;CJM"},"hasCjsExports":false},"type":"js/module"}]}